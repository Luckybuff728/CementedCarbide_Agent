# TopMat Agent 启动说明

## 📦 系统架构

- **前端**: Vue 3 + Vite（现代化的对话界面）
- **后端**: FastAPI（RESTful API + WebSocket流式响应）
- **AI工作流**: LangGraph（智能涂层优化流程）

---

## 🚀 快速启动

### 方式一：完整启动（推荐）

使用此脚本同时启动前端和后端：

```batch
start_vue.bat
```

- 前端地址：http://localhost:3000
- API文档：http://localhost:8000/docs

---

### 方式二：分别启动

#### 1. 仅启动后端

```batch
start_backend.bat
```

或

```batch
python run.py
# 选择选项 1: FastAPI后端服务
```

#### 2. 仅启动前端

```batch
cd frontend
npm run dev
```

---

## 🛠️ 其他功能

### 演示模式

快速演示系统功能（无需前端界面）：

```batch
python run.py
# 选择选项 2: 演示模式
```

或直接运行：

```batch
python run.py demo
```

### 运行测试

```batch
python run.py
# 选择选项 3: 运行测试
```

或使用start.bat：

```batch
start.bat
# 选择选项 3: 运行测试
```

---

## 📋 启动脚本说明

| 脚本文件 | 功能 | 适用场景 |
|---------|------|----------|
| `start_vue.bat` | 同时启动前后端 | ✅ 日常开发和使用（推荐） |
| `start_backend.bat` | 仅启动FastAPI后端 | 后端开发或前端已单独启动 |
| `start.bat` | 交互式菜单启动 | 需要选择特定功能（测试、演示等） |
| `run.py` | Python启动脚本 | 命令行方式启动或脚本集成 |
| `setup_chat_ui.bat` | 安装前端依赖 | 首次使用前运行一次 |

---

## 🔧 首次使用

1. **安装前端依赖**（首次运行需要）：
   ```batch
   setup_chat_ui.bat
   ```

2. **配置环境变量**：
   - 复制 `.env.example` 到 `.env`
   - 填写阿里云百炼API密钥

3. **启动系统**：
   ```batch
   start_vue.bat
   ```

---

## ⚠️ 注意事项

- **Python要求**: Python 3.9+
- **Node.js要求**: Node.js 16+
- **端口占用**: 
  - 前端默认端口: 3000
  - 后端默认端口: 8000
- **首次启动**: 前端首次编译需要10-30秒

---

## 🗑️ 已移除的旧文件

以下文件已被清理（使用Vue前端替代）：
- ~~`streamlit_app.py`~~ - 已删除
- ~~Streamlit相关启动选项~~ - 已从脚本中移除

---

## 📞 问题排查

### 后端启动失败
- 检查 `.env` 文件是否配置API密钥
- 检查端口8000是否被占用
- 确认Python依赖已安装：`pip install -r requirements.txt`

### 前端启动失败
- 检查Node.js版本是否>=16
- 运行 `setup_chat_ui.bat` 安装依赖
- 检查端口3000是否被占用

### 前端无法连接后端
- 确认后端服务正在运行（http://localhost:8000/docs 可访问）
- 检查防火墙设置
